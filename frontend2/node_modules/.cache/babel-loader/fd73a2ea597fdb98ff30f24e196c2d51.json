{"remainingRequest":"/home/benntend/Desktop/store-demo/frontend2/node_modules/babel-loader/lib/index.js!/home/benntend/Desktop/store-demo/frontend2/node_modules/eslint-loader/index.js??ref--13-0!/home/benntend/Desktop/store-demo/frontend2/src/store/modules/auth.js","dependencies":[{"path":"/home/benntend/Desktop/store-demo/frontend2/src/store/modules/auth.js","mtime":1614058922707},{"path":"/home/benntend/Desktop/store-demo/frontend2/node_modules/cache-loader/dist/cjs.js","mtime":1571365859435},{"path":"/home/benntend/Desktop/store-demo/frontend2/node_modules/babel-loader/lib/index.js","mtime":1612498619832},{"path":"/home/benntend/Desktop/store-demo/frontend2/node_modules/eslint-loader/index.js","mtime":1571365859186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2Jlbm50ZW5kL0Rlc2t0b3Avc3RvcmUtZGVtby9mcm9udGVuZDIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBqd3REZWNyeXB0IH0gZnJvbSAiLi4vLi4vc2hhcmVkL2p3dEhlbHBlciI7Cgp2YXIgc3RhdGUgPSBmdW5jdGlvbiBzdGF0ZSgpIHsKICByZXR1cm4gewogICAgYXV0aERhdGE6IHsKICAgICAgdG9rZW46ICIiLAogICAgICByZWZyZXNoVG9rZW46ICIiLAogICAgICB0b2tlbkV4cDogIiIsCiAgICAgIHVzZXJJZDogIiIsCiAgICAgIHVzZXJOYW1lOiAiIiwKICAgICAgZW1haWw6ICIiCiAgICB9LAogICAgbG9naW5TdGF0dXM6ICIiCiAgfTsKfTsKCnZhciBnZXR0ZXJzID0gewogIGdldExvZ2luU3RhdHVzOiBmdW5jdGlvbiBnZXRMb2dpblN0YXR1cyhzdGF0ZSkgewogICAgcmV0dXJuIHN0YXRlLmxvZ2luU3RhdHVzOwogIH0sCiAgZ2V0QXV0aFVzZXI6IGZ1bmN0aW9uIGdldEF1dGhVc2VyKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuYXV0aERhdGE7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgaGVhZGVyLCByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgICBoZWFkZXIgPSB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCwgIi9hcGkvYXV0aC9zaWduaW4iKSwgcGF5bG9hZCwgaGVhZGVyKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRhIiwgcmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgIGNvbW1pdCgnc2F2ZVRva2VuRGF0YScsIHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2luU3RhdHVzJywgJ1N1Y2Nlc3MnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCAic3VjY2VzcyIpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2luU3RhdHVzJywgJ0ZhaWwnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC50MC5yZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMywgMTNdXSk7CiAgICB9KSkoKTsKICB9LAogIHNpZ25VcDogZnVuY3Rpb24gc2lnblVwKF8sIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgaGVhZGVyLCByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgaGVhZGVyID0gewogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCwgIi9hcGkvYXV0aC9zaWdudXAiKSwgcGF5bG9hZCwgaGVhZGVyKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIudDAucmVzcG9uc2UpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzIsIDldXSk7CiAgICB9KSkoKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgc2F2ZVRva2VuRGF0YTogZnVuY3Rpb24gc2F2ZVRva2VuRGF0YShzdGF0ZSwgZGF0YSkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgZGF0YS50b2tlbik7CiAgICB2YXIgand0RGVjb2RlZFZhbHVlID0gand0RGVjcnlwdChkYXRhLnRva2VuKTsKICAgIGNvbnNvbGUubG9nKCJKV1QiLCBqd3REZWNvZGVkVmFsdWUpOwogICAgdmFyIG5ld1Rva2VuRGF0YSA9IHsKICAgICAgdG9rZW46IGRhdGEudG9rZW4sCiAgICAgIHJlZnJlc2hUb2tlbjogIiIsCiAgICAgIHRva2VuRXhwOiAiIiwKICAgICAgdXNlcklkOiBkYXRhLmlkLAogICAgICB1c2VyTmFtZTogZGF0YS5uYW1lLAogICAgICBlbWFpbDogZGF0YS5lbWFpbAogICAgfTsKICAgIGNvbnNvbGUubG9nKG5ld1Rva2VuRGF0YSk7CiAgICBzdGF0ZS5hdXRoRGF0YSA9IG5ld1Rva2VuRGF0YTsKICB9LAogIHNldExvZ2luU3RhdHVzOiBmdW5jdGlvbiBzZXRMb2dpblN0YXR1cyhzdGF0ZSwgdmFsdWUpIHsKICAgIHN0YXRlLmxvZ2luU3RhdHVzID0gdmFsdWU7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zLAogIG11dGF0aW9uczogbXV0YXRpb25zCn07"},{"version":3,"sources":["/home/benntend/Desktop/store-demo/frontend2/src/store/modules/auth.js"],"names":["axios","jwtDecrypt","state","authData","token","refreshToken","tokenExp","userId","userName","email","loginStatus","getters","getLoginStatus","getAuthUser","actions","login","payload","commit","console","log","header","post","process","env","VUE_APP_BASE_URL","result","data","response","signUp","_","mutations","saveTokenData","localStorage","setItem","jwtDecodedValue","newTokenData","id","name","setLoginStatus","value","namespaced"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,wBAA3B;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAO;AACjBC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,KAAK,EAAE,EADC;AAERC,MAAAA,YAAY,EAAE,EAFN;AAGRC,MAAAA,QAAQ,EAAE,EAHF;AAIRC,MAAAA,MAAM,EAAE,EAJA;AAKRC,MAAAA,QAAQ,EAAE,EALF;AAMRC,MAAAA,KAAK,EAAE;AANC,KADO;AASjBC,IAAAA,WAAW,EAAE;AATI,GAAP;AAAA,CAAd;;AAYE,IAAMC,OAAO,GAAG;AACdC,EAAAA,cADc,0BACCV,KADD,EACO;AACjB,WAAOA,KAAK,CAACQ,WAAb;AACH,GAHa;AAIdG,EAAAA,WAJc,uBAIFX,KAJE,EAIK;AACf,WAAOA,KAAK,CAACC,QAAb;AACH;AANa,CAAhB;AASA,IAAMW,OAAO,GAAG;AACRC,EAAAA,KADQ,uBACOC,OADP,EACgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAjBC,cAAAA,MAAiB,QAAjBA,MAAiB;AAC1BC,cAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACMI,cAAAA,MAFoB,GAEX;AACX,gCAAgB;AADL,eAFW;AAAA;AAAA;AAAA,qBAMDpB,KAAK,CAACqB,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,gBAA1B,uBAA8DR,OAA9D,EAAuEI,MAAvE,CANC;;AAAA;AAMhBK,cAAAA,MANgB;AAOtBP,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBM,MAAM,CAACC,IAA3B;AACAT,cAAAA,MAAM,CAAC,eAAD,EAAkBQ,MAAM,CAACC,IAAzB,CAAN;AACAT,cAAAA,MAAM,CAAC,gBAAD,EAAkB,SAAlB,CAAN;AATsB,+CAUf,SAVe;;AAAA;AAAA;AAAA;AAatBA,cAAAA,MAAM,CAAC,gBAAD,EAAkB,MAAlB,CAAN;AAbsB,+CAcf,YAAMU,QAAN,CAAeD,IAdA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgB7B,GAjBa;AAkBRE,EAAAA,MAlBQ,kBAkBDC,CAlBC,EAkBEb,OAlBF,EAkBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBE,cAAAA,OAAO,CAACC,GAAR,CAAYH,OAAZ;AACMI,cAAAA,MAFe,GAEN;AACX,gCAAgB;AADL,eAFM;AAAA;AAAA;AAAA,qBAMIpB,KAAK,CAACqB,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,gBAA1B,uBAA8DR,OAA9D,EAAuEI,MAAvE,CANJ;;AAAA;AAMXK,cAAAA,MANW;AAAA,gDAQVA,MARU;;AAAA;AAAA;AAAA;AAAA,gDAYV,aAAME,QAZI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAexB;AAjCa,CAAhB;AAoCA,IAAMG,SAAS,GAAG;AACdC,EAAAA,aADc,yBACA7B,KADA,EACOwB,IADP,EACa;AACvBM,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,IAAI,CAACtB,KAAnC;AAEA,QAAM8B,eAAe,GAAGjC,UAAU,CAACyB,IAAI,CAACtB,KAAN,CAAlC;AAEAc,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBe,eAAnB;AAEA,QAAMC,YAAY,GAAG;AACnB/B,MAAAA,KAAK,EAAEsB,IAAI,CAACtB,KADO;AAEnBC,MAAAA,YAAY,EAAE,EAFK;AAGnBC,MAAAA,QAAQ,EAAE,EAHS;AAInBC,MAAAA,MAAM,EAAEmB,IAAI,CAACU,EAJM;AAKnB5B,MAAAA,QAAQ,EAAEkB,IAAI,CAACW,IALI;AAMnB5B,MAAAA,KAAK,EAAEiB,IAAI,CAACjB;AANO,KAArB;AASAS,IAAAA,OAAO,CAACC,GAAR,CAAYgB,YAAZ;AAEAjC,IAAAA,KAAK,CAACC,QAAN,GAAiBgC,YAAjB;AACH,GApBa;AAqBdG,EAAAA,cArBc,0BAqBCpC,KArBD,EAqBQqC,KArBR,EAqBe;AACzBrC,IAAAA,KAAK,CAACQ,WAAN,GAAoB6B,KAApB;AACH;AAvBa,CAAlB;AA0BA,eAAc;AACVC,EAAAA,UAAU,EAAC,IADD;AAEVtC,EAAAA,KAAK,EAALA,KAFU;AAGVS,EAAAA,OAAO,EAAPA,OAHU;AAIVG,EAAAA,OAAO,EAAPA,OAJU;AAKVgB,EAAAA,SAAS,EAATA;AALU,CAAd","sourcesContent":["import axios from \"axios\";\nimport { jwtDecrypt } from \"../../shared/jwtHelper\";\n\nconst state = () => ({\n    authData: {\n      token: \"\",\n      refreshToken: \"\",\n      tokenExp: \"\",\n      userId: \"\",\n      userName: \"\",\n      email: \"\"\n    },\n    loginStatus: \"\"\n  });\n   \n  const getters = {\n    getLoginStatus(state){\n        return state.loginStatus;\n    },\n    getAuthUser(state) {\n        return state.authData\n    }\n  };\n   \n  const actions = {\n    async login({commit},payload) {\n        console.log(payload);\n        const header = {\n            'Content-Type': 'application/json',\n        }\n        try{\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signin`, payload, header)\n            console.log(\"data\", result.data)\n            commit('saveTokenData', result.data)\n            commit('setLoginStatus','Success')\n            return \"success\"\n        }\n        catch (error) {\n            commit('setLoginStatus','Fail');\n            return error.response.data\n        }\n    },\n    async signUp(_, payload) {\n        console.log(payload)\n        const header = {\n            'Content-Type': 'multipart/form-data'\n        }\n        try {\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signup`, payload, header)\n            // commit('setLoginStatus','Fail');\n            return result\n        }\n        catch (error) {\n            // commit('setLoginStatus','Fail');\n            return error.response\n        }\n\n    }\n  };\n   \n  const mutations = {\n      saveTokenData(state, data) {\n          localStorage.setItem(\"token\", data.token)\n\n          const jwtDecodedValue = jwtDecrypt(data.token)\n\n          console.log(\"JWT\", jwtDecodedValue)\n\n          const newTokenData = {\n            token: data.token,\n            refreshToken: \"\",\n            tokenExp: \"\",\n            userId: data.id,\n            userName: data.name,\n            email: data.email\n          }\n\n          console.log(newTokenData)\n\n          state.authData = newTokenData\n      },\n      setLoginStatus(state, value) {\n          state.loginStatus = value\n      }\n  };\n   \n  export default{\n      namespaced:true,\n      state,\n      getters,\n      actions,\n      mutations\n  }"]}]}