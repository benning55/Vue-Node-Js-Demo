{"remainingRequest":"/frontend/node_modules/babel-loader/lib/index.js!/frontend/node_modules/eslint-loader/index.js??ref--13-0!/frontend/src/store/modules/auth.js","dependencies":[{"path":"/frontend/src/store/modules/auth.js","mtime":1614160624244},{"path":"/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1571365859435},{"path":"/frontend/node_modules/babel-loader/lib/index.js","mtime":1612498619832},{"path":"/frontend/node_modules/eslint-loader/index.js","mtime":1571365859186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGp3dERlY3J5cHQgfSBmcm9tICIuLi8uLi9zaGFyZWQvand0SGVscGVyIjsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBhdXRoRGF0YTogewogICAgICB0b2tlbjogIiIsCiAgICAgIHJlZnJlc2hUb2tlbjogIiIsCiAgICAgIHRva2VuRXhwOiAiIiwKICAgICAgdXNlcklkOiAiIiwKICAgICAgdXNlck5hbWU6ICIiLAogICAgICBlbWFpbDogIiIKICAgIH0sCiAgICBsb2dpblN0YXR1czogIiIKICB9Owp9OwoKdmFyIGdldHRlcnMgPSB7CiAgZ2V0TG9naW5TdGF0dXM6IGZ1bmN0aW9uIGdldExvZ2luU3RhdHVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubG9naW5TdGF0dXM7CiAgfSwKICBnZXRBdXRoVXNlcjogZnVuY3Rpb24gZ2V0QXV0aFVzZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoRGF0YTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoX3JlZikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgY29tbWl0KCJob21lL2NsZWFyQ2FydCIsIG51bGwsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgICBjb21taXQoJ3JlbW92ZVRva2VuJyk7CiAgICByZXR1cm4gdHJ1ZTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmMiwgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgaGVhZGVyLCByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgaGVhZGVyID0gewogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9VUkwsICIvYXBpL2F1dGgvc2lnbmluIiksIHBheWxvYWQsIGhlYWRlcik7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZGF0YSIsIHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICBjb21taXQoJ3NhdmVUb2tlbkRhdGEnLCByZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgY29tbWl0KCdzZXRMb2dpblN0YXR1cycsICdTdWNjZXNzJyk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgIlN1Y2Nlc3MiKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgY29tbWl0KCdzZXRMb2dpblN0YXR1cycsICdGYWlsJyk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQudDAucmVzcG9uc2UuZGF0YSk7CgogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCBudWxsLCBbWzIsIDEyXV0pOwogICAgfSkpKCk7CiAgfSwKICBzaWduVXA6IGZ1bmN0aW9uIHNpZ25VcChfLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGhlYWRlciwgcmVzdWx0OwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQpOwogICAgICAgICAgICAgIGhlYWRlciA9IHsKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YScKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMjsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9VUkwsICIvYXBpL2F1dGgvc2lnbnVwIiksIHBheWxvYWQsIGhlYWRlcik7CgogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlc3VsdCk7CgogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSA5OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQyLnQwLnJlc3BvbnNlKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1syLCA5XV0pOwogICAgfSkpKCk7CiAgfQp9Owp2YXIgbXV0YXRpb25zID0gewogIHNhdmVUb2tlbkRhdGE6IGZ1bmN0aW9uIHNhdmVUb2tlbkRhdGEoc3RhdGUsIGRhdGEpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIGRhdGEudG9rZW4pOwogICAgdmFyIGp3dERlY29kZWRWYWx1ZSA9IGp3dERlY3J5cHQoZGF0YS50b2tlbik7CiAgICBjb25zb2xlLmxvZygiSldUIiwgand0RGVjb2RlZFZhbHVlKTsKICAgIHZhciBuZXdUb2tlbkRhdGEgPSB7CiAgICAgIHRva2VuOiBkYXRhLnRva2VuLAogICAgICByZWZyZXNoVG9rZW46ICIiLAogICAgICB0b2tlbkV4cDogIiIsCiAgICAgIHVzZXJJZDogZGF0YS5pZCwKICAgICAgdXNlck5hbWU6IGRhdGEubmFtZSwKICAgICAgZW1haWw6IGRhdGEuZW1haWwKICAgIH07CiAgICBjb25zb2xlLmxvZyhuZXdUb2tlbkRhdGEpOwogICAgc3RhdGUuYXV0aERhdGEgPSBuZXdUb2tlbkRhdGE7CiAgfSwKICBzZXRMb2dpblN0YXR1czogZnVuY3Rpb24gc2V0TG9naW5TdGF0dXMoc3RhdGUsIHZhbHVlKSB7CiAgICBzdGF0ZS5sb2dpblN0YXR1cyA9IHZhbHVlOwogIH0sCiAgcmVtb3ZlVG9rZW46IGZ1bmN0aW9uIHJlbW92ZVRva2VuKHN0YXRlKSB7CiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgidG9rZW4iKTsKICAgIHN0YXRlLmxvZ2luU3RhdHVzID0gIiI7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgZ2V0dGVyczogZ2V0dGVycywKICBhY3Rpb25zOiBhY3Rpb25zLAogIG11dGF0aW9uczogbXV0YXRpb25zCn07"},{"version":3,"sources":["/frontend/src/store/modules/auth.js"],"names":["axios","jwtDecrypt","state","authData","token","refreshToken","tokenExp","userId","userName","email","loginStatus","getters","getLoginStatus","getAuthUser","actions","signOut","commit","root","login","payload","header","post","process","env","VUE_APP_BASE_URL","result","console","log","data","response","signUp","_","mutations","saveTokenData","localStorage","setItem","jwtDecodedValue","newTokenData","id","name","setLoginStatus","value","removeToken","removeItem","namespaced"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,wBAA3B;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ;AAAA,SAAO;AACjBC,IAAAA,QAAQ,EAAE;AACRC,MAAAA,KAAK,EAAE,EADC;AAERC,MAAAA,YAAY,EAAE,EAFN;AAGRC,MAAAA,QAAQ,EAAE,EAHF;AAIRC,MAAAA,MAAM,EAAE,EAJA;AAKRC,MAAAA,QAAQ,EAAE,EALF;AAMRC,MAAAA,KAAK,EAAE;AANC,KADO;AASjBC,IAAAA,WAAW,EAAE;AATI,GAAP;AAAA,CAAd;;AAYE,IAAMC,OAAO,GAAG;AACdC,EAAAA,cADc,0BACCV,KADD,EACO;AACjB,WAAOA,KAAK,CAACQ,WAAb;AACH,GAHa;AAIdG,EAAAA,WAJc,uBAIFX,KAJE,EAIK;AACf,WAAOA,KAAK,CAACC,QAAb;AACH;AANa,CAAhB;AASA,IAAMW,OAAO,GAAG;AACdC,EAAAA,OADc,yBACI;AAAA,QAATC,MAAS,QAATA,MAAS;AACdA,IAAAA,MAAM,CAAC,gBAAD,EAAmB,IAAnB,EAAyB;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAAzB,CAAN;AACAD,IAAAA,MAAM,CAAC,aAAD,CAAN;AACA,WAAO,IAAP;AACH,GALa;AAMRE,EAAAA,KANQ,wBAMOC,OANP,EAMgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAjBH,cAAAA,MAAiB,SAAjBA,MAAiB;AACpBI,cAAAA,MADoB,GACX;AACX,gCAAgB;AADL,eADW;AAAA;AAAA;AAAA,qBAKDpB,KAAK,CAACqB,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,gBAA1B,uBAA8DL,OAA9D,EAAuEC,MAAvE,CALC;;AAAA;AAKhBK,cAAAA,MALgB;AAMtBC,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBF,MAAM,CAACG,IAA3B;AACAZ,cAAAA,MAAM,CAAC,eAAD,EAAkBS,MAAM,CAACG,IAAzB,CAAN;AACAZ,cAAAA,MAAM,CAAC,gBAAD,EAAkB,SAAlB,CAAN;AARsB,+CASf,SATe;;AAAA;AAAA;AAAA;AAYtBA,cAAAA,MAAM,CAAC,gBAAD,EAAkB,MAAlB,CAAN;AAZsB,+CAaf,YAAMa,QAAN,CAAeD,IAbA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAe7B,GArBa;AAsBRE,EAAAA,MAtBQ,kBAsBDC,CAtBC,EAsBEZ,OAtBF,EAsBW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBO,cAAAA,OAAO,CAACC,GAAR,CAAYR,OAAZ;AACMC,cAAAA,MAFe,GAEN;AACX,gCAAgB;AADL,eAFM;AAAA;AAAA;AAAA,qBAMIpB,KAAK,CAACqB,IAAN,WAAcC,OAAO,CAACC,GAAR,CAAYC,gBAA1B,uBAA8DL,OAA9D,EAAuEC,MAAvE,CANJ;;AAAA;AAMXK,cAAAA,MANW;AAAA,gDAQVA,MARU;;AAAA;AAAA;AAAA;AAAA,gDAYV,aAAMI,QAZI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAexB;AArCa,CAAhB;AAwCA,IAAMG,SAAS,GAAG;AACdC,EAAAA,aADc,yBACA/B,KADA,EACO0B,IADP,EACa;AACvBM,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BP,IAAI,CAACxB,KAAnC;AAEA,QAAMgC,eAAe,GAAGnC,UAAU,CAAC2B,IAAI,CAACxB,KAAN,CAAlC;AAEAsB,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBS,eAAnB;AAEA,QAAMC,YAAY,GAAG;AACnBjC,MAAAA,KAAK,EAAEwB,IAAI,CAACxB,KADO;AAEnBC,MAAAA,YAAY,EAAE,EAFK;AAGnBC,MAAAA,QAAQ,EAAE,EAHS;AAInBC,MAAAA,MAAM,EAAEqB,IAAI,CAACU,EAJM;AAKnB9B,MAAAA,QAAQ,EAAEoB,IAAI,CAACW,IALI;AAMnB9B,MAAAA,KAAK,EAAEmB,IAAI,CAACnB;AANO,KAArB;AASAiB,IAAAA,OAAO,CAACC,GAAR,CAAYU,YAAZ;AAEAnC,IAAAA,KAAK,CAACC,QAAN,GAAiBkC,YAAjB;AACH,GApBa;AAqBdG,EAAAA,cArBc,0BAqBCtC,KArBD,EAqBQuC,KArBR,EAqBe;AACzBvC,IAAAA,KAAK,CAACQ,WAAN,GAAoB+B,KAApB;AACH,GAvBa;AAwBdC,EAAAA,WAxBc,uBAwBFxC,KAxBE,EAwBI;AACdgC,IAAAA,YAAY,CAACS,UAAb,CAAwB,OAAxB;AACAzC,IAAAA,KAAK,CAACQ,WAAN,GAAoB,EAApB;AACH;AA3Ba,CAAlB;AA8BA,eAAc;AACVkC,EAAAA,UAAU,EAAC,IADD;AAEV1C,EAAAA,KAAK,EAALA,KAFU;AAGVS,EAAAA,OAAO,EAAPA,OAHU;AAIVG,EAAAA,OAAO,EAAPA,OAJU;AAKVkB,EAAAA,SAAS,EAATA;AALU,CAAd","sourcesContent":["import axios from \"axios\";\nimport { jwtDecrypt } from \"../../shared/jwtHelper\";\n\nconst state = () => ({\n    authData: {\n      token: \"\",\n      refreshToken: \"\",\n      tokenExp: \"\",\n      userId: \"\",\n      userName: \"\",\n      email: \"\"\n    },\n    loginStatus: \"\"\n  });\n   \n  const getters = {\n    getLoginStatus(state){\n        return state.loginStatus;\n    },\n    getAuthUser(state) {\n        return state.authData\n    }\n  };\n   \n  const actions = {\n    signOut({commit}) {\n        commit(\"home/clearCart\", null, { root: true })\n        commit('removeToken')\n        return true\n    },\n    async login({commit},payload) {\n        const header = {\n            'Content-Type': 'application/json',\n        }\n        try{\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signin`, payload, header)\n            console.log(\"data\", result.data)\n            commit('saveTokenData', result.data)\n            commit('setLoginStatus','Success')\n            return \"Success\"\n        }\n        catch (error) {\n            commit('setLoginStatus','Fail');\n            return error.response.data\n        }\n    },\n    async signUp(_, payload) {\n        console.log(payload)\n        const header = {\n            'Content-Type': 'multipart/form-data'\n        }\n        try {\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signup`, payload, header)\n            // commit('setLoginStatus','Fail');\n            return result\n        }\n        catch (error) {\n            // commit('setLoginStatus','Fail');\n            return error.response\n        }\n\n    }\n  };\n   \n  const mutations = {\n      saveTokenData(state, data) {\n          localStorage.setItem(\"token\", data.token)\n\n          const jwtDecodedValue = jwtDecrypt(data.token)\n\n          console.log(\"JWT\", jwtDecodedValue)\n\n          const newTokenData = {\n            token: data.token,\n            refreshToken: \"\",\n            tokenExp: \"\",\n            userId: data.id,\n            userName: data.name,\n            email: data.email\n          }\n\n          console.log(newTokenData)\n\n          state.authData = newTokenData\n      },\n      setLoginStatus(state, value) {\n          state.loginStatus = value\n      },\n      removeToken(state){\n          localStorage.removeItem(\"token\")\n          state.loginStatus = \"\"\n      }\n  };\n   \n  export default{\n      namespaced:true,\n      state,\n      getters,\n      actions,\n      mutations\n  }"]}]}