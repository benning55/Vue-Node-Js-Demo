{"remainingRequest":"/frontend/node_modules/babel-loader/lib/index.js!/frontend/node_modules/eslint-loader/index.js??ref--13-0!/frontend/src/store/modules/auth.js","dependencies":[{"path":"/frontend/src/store/modules/auth.js","mtime":1614076398966},{"path":"/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1571365859435},{"path":"/frontend/node_modules/babel-loader/lib/index.js","mtime":1612498619832},{"path":"/frontend/node_modules/eslint-loader/index.js","mtime":1571365859186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGp3dERlY3J5cHQgfSBmcm9tICIuLi8uLi9zaGFyZWQvand0SGVscGVyIjsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBhdXRoRGF0YTogewogICAgICB0b2tlbjogIiIsCiAgICAgIHJlZnJlc2hUb2tlbjogIiIsCiAgICAgIHRva2VuRXhwOiAiIiwKICAgICAgdXNlcklkOiAiIiwKICAgICAgdXNlck5hbWU6ICIiLAogICAgICBlbWFpbDogIiIKICAgIH0sCiAgICBsb2dpblN0YXR1czogIiIKICB9Owp9OwoKdmFyIGdldHRlcnMgPSB7CiAgZ2V0TG9naW5TdGF0dXM6IGZ1bmN0aW9uIGdldExvZ2luU3RhdHVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubG9naW5TdGF0dXM7CiAgfSwKICBnZXRBdXRoVXNlcjogZnVuY3Rpb24gZ2V0QXV0aFVzZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoRGF0YTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIHNpZ25PdXQ6IGZ1bmN0aW9uIHNpZ25PdXQoX3JlZikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgY29uc29sZS5sb2coImJlbm5pbmciKTsKICAgIGNvbW1pdCgncmVtb3ZlVG9rZW4nKTsKICAgIHJldHVybiB0cnVlOwogIH0sCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYyLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCBoZWFkZXIsIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgICBoZWFkZXIgPSB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCwgIi9hcGkvYXV0aC9zaWduaW4iKSwgcGF5bG9hZCwgaGVhZGVyKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRhIiwgcmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgIGNvbW1pdCgnc2F2ZVRva2VuRGF0YScsIHJlc3VsdC5kYXRhKTsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2luU3RhdHVzJywgJ1N1Y2Nlc3MnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCAiU3VjY2VzcyIpOwoKICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgzKTsKICAgICAgICAgICAgICBjb21taXQoJ3NldExvZ2luU3RhdHVzJywgJ0ZhaWwnKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC50MC5yZXNwb25zZS5kYXRhKTsKCiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMywgMTNdXSk7CiAgICB9KSkoKTsKICB9LAogIHNpZ25VcDogZnVuY3Rpb24gc2lnblVwKF8sIHBheWxvYWQpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgaGVhZGVyLCByZXN1bHQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocGF5bG9hZCk7CiAgICAgICAgICAgICAgaGVhZGVyID0gewogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX1VSTCwgIi9hcGkvYXV0aC9zaWdudXAiKSwgcGF5bG9hZCwgaGVhZGVyKTsKCiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gX2NvbnRleHQyWyJjYXRjaCJdKDIpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIudDAucmVzcG9uc2UpOwoKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzIsIDldXSk7CiAgICB9KSkoKTsKICB9Cn07CnZhciBtdXRhdGlvbnMgPSB7CiAgc2F2ZVRva2VuRGF0YTogZnVuY3Rpb24gc2F2ZVRva2VuRGF0YShzdGF0ZSwgZGF0YSkgewogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgZGF0YS50b2tlbik7CiAgICB2YXIgand0RGVjb2RlZFZhbHVlID0gand0RGVjcnlwdChkYXRhLnRva2VuKTsKICAgIGNvbnNvbGUubG9nKCJKV1QiLCBqd3REZWNvZGVkVmFsdWUpOwogICAgdmFyIG5ld1Rva2VuRGF0YSA9IHsKICAgICAgdG9rZW46IGRhdGEudG9rZW4sCiAgICAgIHJlZnJlc2hUb2tlbjogIiIsCiAgICAgIHRva2VuRXhwOiAiIiwKICAgICAgdXNlcklkOiBkYXRhLmlkLAogICAgICB1c2VyTmFtZTogZGF0YS5uYW1lLAogICAgICBlbWFpbDogZGF0YS5lbWFpbAogICAgfTsKICAgIGNvbnNvbGUubG9nKG5ld1Rva2VuRGF0YSk7CiAgICBzdGF0ZS5hdXRoRGF0YSA9IG5ld1Rva2VuRGF0YTsKICB9LAogIHNldExvZ2luU3RhdHVzOiBmdW5jdGlvbiBzZXRMb2dpblN0YXR1cyhzdGF0ZSwgdmFsdWUpIHsKICAgIHN0YXRlLmxvZ2luU3RhdHVzID0gdmFsdWU7CiAgfSwKICByZW1vdmVUb2tlbjogZnVuY3Rpb24gcmVtb3ZlVG9rZW4oc3RhdGUpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ0b2tlbiIpOwogICAgc3RhdGUubG9naW5TdGF0dXMgPSAiIjsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/frontend/src/store/modules/auth.js"],"names":["axios","jwtDecrypt","state","authData","token","refreshToken","tokenExp","userId","userName","email","loginStatus","getters","getLoginStatus","getAuthUser","actions","signOut","commit","console","log","login","payload","header","post","process","env","VUE_APP_BASE_URL","result","data","response","signUp","_","mutations","saveTokenData","localStorage","setItem","jwtDecodedValue","newTokenData","id","name","setLoginStatus","value","removeToken","removeItem","namespaced"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { jwtDecrypt } from \"../../shared/jwtHelper\";\n\nconst state = () => ({\n    authData: {\n      token: \"\",\n      refreshToken: \"\",\n      tokenExp: \"\",\n      userId: \"\",\n      userName: \"\",\n      email: \"\"\n    },\n    loginStatus: \"\"\n  });\n   \n  const getters = {\n    getLoginStatus(state){\n        return state.loginStatus;\n    },\n    getAuthUser(state) {\n        return state.authData\n    }\n  };\n   \n  const actions = {\n    signOut({commit}) {\n        console.log(\"benning\")\n        commit('removeToken')\n        return true\n    },\n    async login({commit},payload) {\n        console.log(payload);\n        const header = {\n            'Content-Type': 'application/json',\n        }\n        try{\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signin`, payload, header)\n            console.log(\"data\", result.data)\n            commit('saveTokenData', result.data)\n            commit('setLoginStatus','Success')\n            return \"Success\"\n        }\n        catch (error) {\n            commit('setLoginStatus','Fail');\n            return error.response.data\n        }\n    },\n    async signUp(_, payload) {\n        console.log(payload)\n        const header = {\n            'Content-Type': 'multipart/form-data'\n        }\n        try {\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signup`, payload, header)\n            // commit('setLoginStatus','Fail');\n            return result\n        }\n        catch (error) {\n            // commit('setLoginStatus','Fail');\n            return error.response\n        }\n\n    }\n  };\n   \n  const mutations = {\n      saveTokenData(state, data) {\n          localStorage.setItem(\"token\", data.token)\n\n          const jwtDecodedValue = jwtDecrypt(data.token)\n\n          console.log(\"JWT\", jwtDecodedValue)\n\n          const newTokenData = {\n            token: data.token,\n            refreshToken: \"\",\n            tokenExp: \"\",\n            userId: data.id,\n            userName: data.name,\n            email: data.email\n          }\n\n          console.log(newTokenData)\n\n          state.authData = newTokenData\n      },\n      setLoginStatus(state, value) {\n          state.loginStatus = value\n      },\n      removeToken(state){\n          localStorage.removeItem(\"token\")\n          state.loginStatus = \"\"\n      }\n  };\n   \n  export default{\n      namespaced:true,\n      state,\n      getters,\n      actions,\n      mutations\n  }"]}]}