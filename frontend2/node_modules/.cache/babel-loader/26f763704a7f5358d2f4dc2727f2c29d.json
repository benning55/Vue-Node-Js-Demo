{"remainingRequest":"/frontend/node_modules/babel-loader/lib/index.js!/frontend/node_modules/eslint-loader/index.js??ref--13-0!/frontend/src/store/modules/auth.js","dependencies":[{"path":"/frontend/src/store/modules/auth.js","mtime":1614058922707},{"path":"/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1571365859435},{"path":"/frontend/node_modules/babel-loader/lib/index.js","mtime":1612498619832},{"path":"/frontend/node_modules/eslint-loader/index.js","mtime":1571365859186}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IGp3dERlY3J5cHQgfSBmcm9tICIuLi8uLi9zaGFyZWQvand0SGVscGVyIjsKCnZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIHJldHVybiB7CiAgICBhdXRoRGF0YTogewogICAgICB0b2tlbjogIiIsCiAgICAgIHJlZnJlc2hUb2tlbjogIiIsCiAgICAgIHRva2VuRXhwOiAiIiwKICAgICAgdXNlcklkOiAiIiwKICAgICAgdXNlck5hbWU6ICIiLAogICAgICBlbWFpbDogIiIKICAgIH0sCiAgICBsb2dpblN0YXR1czogIiIKICB9Owp9OwoKdmFyIGdldHRlcnMgPSB7CiAgZ2V0TG9naW5TdGF0dXM6IGZ1bmN0aW9uIGdldExvZ2luU3RhdHVzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUubG9naW5TdGF0dXM7CiAgfSwKICBnZXRBdXRoVXNlcjogZnVuY3Rpb24gZ2V0QXV0aFVzZXIoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5hdXRoRGF0YTsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCBwYXlsb2FkKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCBoZWFkZXIsIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBheWxvYWQpOwogICAgICAgICAgICAgIGhlYWRlciA9IHsKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfVVJMLCAiL2FwaS9hdXRoL3NpZ25pbiIpLCBwYXlsb2FkLCBoZWFkZXIpOwoKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coImRhdGEiLCByZXN1bHQuZGF0YSk7CiAgICAgICAgICAgICAgY29tbWl0KCdzYXZlVG9rZW5EYXRhJywgcmVzdWx0LmRhdGEpOwogICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9naW5TdGF0dXMnLCAnU3VjY2VzcycpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsICJzdWNjZXNzIik7CgogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDMpOwogICAgICAgICAgICAgIGNvbW1pdCgnc2V0TG9naW5TdGF0dXMnLCAnRmFpbCcpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0LnQwLnJlc3BvbnNlLmRhdGEpOwoKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxM11dKTsKICAgIH0pKSgpOwogIH0sCiAgc2lnblVwOiBmdW5jdGlvbiBzaWduVXAoXywgcGF5bG9hZCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBoZWFkZXIsIHJlc3VsdDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYXlsb2FkKTsKICAgICAgICAgICAgICBoZWFkZXIgPSB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfVVJMLCAiL2FwaS9hdXRoL3NpZ251cCIpLCBwYXlsb2FkLCBoZWFkZXIpOwoKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwoKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gOTsKICAgICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMik7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0Mi50MC5yZXNwb25zZSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMiwgOV1dKTsKICAgIH0pKSgpOwogIH0KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBzYXZlVG9rZW5EYXRhOiBmdW5jdGlvbiBzYXZlVG9rZW5EYXRhKHN0YXRlLCBkYXRhKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCBkYXRhLnRva2VuKTsKICAgIHZhciBqd3REZWNvZGVkVmFsdWUgPSBqd3REZWNyeXB0KGRhdGEudG9rZW4pOwogICAgY29uc29sZS5sb2coIkpXVCIsIGp3dERlY29kZWRWYWx1ZSk7CiAgICB2YXIgbmV3VG9rZW5EYXRhID0gewogICAgICB0b2tlbjogZGF0YS50b2tlbiwKICAgICAgcmVmcmVzaFRva2VuOiAiIiwKICAgICAgdG9rZW5FeHA6ICIiLAogICAgICB1c2VySWQ6IGRhdGEuaWQsCiAgICAgIHVzZXJOYW1lOiBkYXRhLm5hbWUsCiAgICAgIGVtYWlsOiBkYXRhLmVtYWlsCiAgICB9OwogICAgY29uc29sZS5sb2cobmV3VG9rZW5EYXRhKTsKICAgIHN0YXRlLmF1dGhEYXRhID0gbmV3VG9rZW5EYXRhOwogIH0sCiAgc2V0TG9naW5TdGF0dXM6IGZ1bmN0aW9uIHNldExvZ2luU3RhdHVzKHN0YXRlLCB2YWx1ZSkgewogICAgc3RhdGUubG9naW5TdGF0dXMgPSB2YWx1ZTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBnZXR0ZXJzOiBnZXR0ZXJzLAogIGFjdGlvbnM6IGFjdGlvbnMsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMKfTs="},{"version":3,"sources":["/frontend/src/store/modules/auth.js"],"names":["axios","jwtDecrypt","state","authData","token","refreshToken","tokenExp","userId","userName","email","loginStatus","getters","getLoginStatus","getAuthUser","actions","login","payload","commit","console","log","header","post","process","env","VUE_APP_BASE_URL","result","data","response","signUp","_","mutations","saveTokenData","localStorage","setItem","jwtDecodedValue","newTokenData","id","name","setLoginStatus","value","namespaced"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { jwtDecrypt } from \"../../shared/jwtHelper\";\n\nconst state = () => ({\n    authData: {\n      token: \"\",\n      refreshToken: \"\",\n      tokenExp: \"\",\n      userId: \"\",\n      userName: \"\",\n      email: \"\"\n    },\n    loginStatus: \"\"\n  });\n   \n  const getters = {\n    getLoginStatus(state){\n        return state.loginStatus;\n    },\n    getAuthUser(state) {\n        return state.authData\n    }\n  };\n   \n  const actions = {\n    async login({commit},payload) {\n        console.log(payload);\n        const header = {\n            'Content-Type': 'application/json',\n        }\n        try{\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signin`, payload, header)\n            console.log(\"data\", result.data)\n            commit('saveTokenData', result.data)\n            commit('setLoginStatus','Success')\n            return \"success\"\n        }\n        catch (error) {\n            commit('setLoginStatus','Fail');\n            return error.response.data\n        }\n    },\n    async signUp(_, payload) {\n        console.log(payload)\n        const header = {\n            'Content-Type': 'multipart/form-data'\n        }\n        try {\n            const result = await axios.post(`${process.env.VUE_APP_BASE_URL}/api/auth/signup`, payload, header)\n            // commit('setLoginStatus','Fail');\n            return result\n        }\n        catch (error) {\n            // commit('setLoginStatus','Fail');\n            return error.response\n        }\n\n    }\n  };\n   \n  const mutations = {\n      saveTokenData(state, data) {\n          localStorage.setItem(\"token\", data.token)\n\n          const jwtDecodedValue = jwtDecrypt(data.token)\n\n          console.log(\"JWT\", jwtDecodedValue)\n\n          const newTokenData = {\n            token: data.token,\n            refreshToken: \"\",\n            tokenExp: \"\",\n            userId: data.id,\n            userName: data.name,\n            email: data.email\n          }\n\n          console.log(newTokenData)\n\n          state.authData = newTokenData\n      },\n      setLoginStatus(state, value) {\n          state.loginStatus = value\n      }\n  };\n   \n  export default{\n      namespaced:true,\n      state,\n      getters,\n      actions,\n      mutations\n  }"]}]}